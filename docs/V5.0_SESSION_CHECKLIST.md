# üîÑ V5.0 SESSION INITIALIZATION CHECKLIST

**Version:** 5.0  
**Zweck:** Mandatory Workflow f√ºr jeden neuen Chat-Start  
**Status:** ‚úÖ PRODUCTION-READY

---

## üìã MANDATORY SESSION-START-WORKFLOW

Bei **JEDEM** neuen Chat-Start (Session Initialization) M√úSSEN folgende Schritte ausgef√ºhrt werden:

### **PHASE 0: Knowledge-Base-Sync (CRITICAL)**

```typescript
// VERPFLICHTEND bei jedem Session-Start!
await supabase.functions.invoke("sync-docs-to-knowledge-base", {
  body: { force_refresh: false },
});
```

**Zweck:** Synchronisiert alle wichtigen Dokumentationen in die `knowledge_base` Tabelle.

**Erfolgs-Kriterien:**

- ‚úÖ Alle Core-Docs in `knowledge_base` vorhanden
- ‚úÖ `confidence_score` bei 1.0 f√ºr kritische Entries
- ‚úÖ Keine veralteten Eintr√§ge (>90 Tage)

---

### **PHASE 1: Core Documentation Lesen**

```typescript
const coreDocs = [
  "docs/PROJECT_MEMORY.md",
  "docs/COMPONENT_REGISTRY.md",
  "docs/LESSONS_LEARNED.md",
  "docs/AVOIDABLE_ERRORS.md",
  "docs/V5.0_MIGRATION_COMPLETE.md",
];
```

**Zweck:** Lade alle wichtigen Projekt-Dokumentationen in den Kontext.

---

### **PHASE 2: Knowledge-Base Abfragen**

```typescript
// Lade neueste AI Learning Patterns
const { data: recentLearnings } = await supabase
  .from("ai_learning_patterns")
  .select("*")
  .order("learned_at", { ascending: false })
  .limit(10);

console.log("‚úÖ Recent Learnings loaded:", recentLearnings.length);
```

**Zweck:** Lade die neuesten AI Learning Patterns aus der letzten Session.

---

### **PHASE 3: Known Issues Check (CRITICAL)**

```typescript
// Lade ALLE ungel√∂sten Critical Issues
const { data: criticalIssues } = await supabase
  .from("known_issues")
  .select("*")
  .eq("severity", "critical")
  .eq("resolved", false);

if (criticalIssues.length > 0) {
  console.warn("‚ö†Ô∏è CRITICAL ISSUES:", criticalIssues);
}
```

**Zweck:** Identifiziere alle kritischen, ungel√∂sten Probleme.

**Warnung:** Wenn `criticalIssues.length > 0` ‚Üí Warnung an User ausgeben!

---

### **PHASE 4: Component Registry Laden**

```typescript
// Lade ALLE existierenden Components
const { data: allComponents } = await supabase
  .from("component_registry")
  .select("component_name, file_path, verification_status")
  .eq("verification_status", "active");

console.log("‚úÖ Known Components:", allComponents.length);
```

**Zweck:** Verhindere Recreation von existierenden Components.

**Erfolgs-Kriterien:**

- ‚úÖ Mindestens 20 Components registriert
- ‚úÖ V28Button, V28Card, V28IconBox vorhanden

---

### **PHASE 5: Design System V28.1 Validierung**

```typescript
// Pr√ºfe ob V28.1 Design System korrekt ist
const v28Components = await supabase
  .from("component_registry")
  .select("*")
  .or("component_name.eq.V28Button,component_name.eq.V28Card,component_name.eq.V28IconBox");

if (v28Components.data?.length !== 3) {
  console.error("‚ùå V28 Design System incomplete!");
}
```

**Zweck:** Sicherstellen, dass V28.1 Design System vollst√§ndig ist.

**Erfolgs-Kriterien:**

- ‚úÖ V28Button existiert
- ‚úÖ V28Card existiert
- ‚úÖ V28IconBox existiert

---

### **PHASE 6: Self-Monitoring Check**

```typescript
// Pr√ºfe letzten Self-Report
const { data: lastReport } = await supabase
  .from("ai_self_reports")
  .select("*")
  .order("report_date", { ascending: false })
  .limit(1);

if (lastReport && lastReport.length > 0) {
  const daysSinceLastReport = Math.floor(
    (Date.now() - new Date(lastReport[0].report_date).getTime()) / (1000 * 60 * 60 * 24)
  );

  if (daysSinceLastReport > 7) {
    console.warn("‚ö†Ô∏è Self-Report veraltet! Letzter Report vor", daysSinceLastReport, "Tagen");
  }
}
```

**Zweck:** Pr√ºfe ob w√∂chentlicher Self-Report aktuell ist.

**Erfolgs-Kriterien:**

- ‚úÖ Letzter Report < 7 Tage alt
- ‚úÖ `metrics.knowledge_check_compliance >= 0.9`
- ‚úÖ `metrics.hallucination_rate <= 0.01`

---

## üìä SESSION INITIALIZATION SUMMARY

```typescript
console.log("‚úÖ Session initialized mit:");
console.log("  - Learnings:", recentLearnings.data.length);
console.log("  - Critical Issues:", criticalIssues.data.length);
console.log("  - Known Components:", allComponents.data.length);
console.log("  - V28 Design System:", v28Components.data?.length === 3 ? "‚úÖ" : "‚ùå");
console.log("  - Last Self-Report:", daysSinceLastReport, "days ago");
```

---

## üö® FAIL-SAFES

### **Wenn Knowledge-Base-Sync fehlschl√§gt:**

```typescript
if (syncResult.errors > 0) {
  console.error("‚ùå Knowledge-Base-Sync failed!");
  // FALLBACK: Lese direkt aus docs/ Ordner
}
```

### **Wenn Critical Issues gefunden:**

```typescript
if (criticalIssues.length > 0) {
  console.warn("‚ö†Ô∏è WARNUNG: Kritische Issues gefunden!");
  // User benachrichtigen
}
```

### **Wenn V28 Design System incomplete:**

```typescript
if (v28Components.data?.length !== 3) {
  console.error("‚ùå V28 Design System NICHT vollst√§ndig!");
  // Warnung an User + Empfehlung zur Neuregistrierung
}
```

---

## üéØ ERFOLGS-KRITERIEN F√úR SESSION-START

| Kriterium           | Ziel             | Status |
| ------------------- | ---------------- | ------ |
| Knowledge-Base-Sync | Success = true   | ‚úÖ     |
| Core Docs geladen   | Alle 5 Docs      | ‚úÖ     |
| Recent Learnings    | >= 5 Entries     | ‚úÖ     |
| Critical Issues     | 0 ungel√∂ste      | ‚úÖ     |
| Known Components    | >= 20 Components | ‚úÖ     |
| V28 Design System   | 3/3 Components   | ‚úÖ     |
| Last Self-Report    | < 7 Tage alt     | ‚úÖ     |

---

## üìù INTEGRATION IN NEXIFY WORKFLOW

**In `NEXIFY_WORKFLOW_PROMPT_V19.0.0.md`:**

```
üîÑ NEXIFY WORKFLOW-START V19.0.0

PHASE 0: SESSION INITIALIZATION (NEU!)
- Knowledge-Base-Sync ausf√ºhren
- Core Docs laden
- Known Issues Check
- Component Registry laden
- V28.1 Design System validieren

PHASE 1: SELBSTREFLEXION & CODE-AUDIT
...
```

---

## üîß AUTOMATISIERUNG (OPTIONAL)

**GitHub Action f√ºr w√∂chentlichen Self-Review:**

```yaml
# .github/workflows/weekly-self-review.yml
name: Weekly AI Self-Review
on:
  schedule:
    - cron: "0 0 * * 1" # Jeden Montag um 00:00 UTC
  workflow_dispatch:

jobs:
  self-review:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Self-Review
        run: |
          curl -X POST https://vsbqyqhzxmwezlhzdmfd.supabase.co/functions/v1/weekly-self-review \
            -H "Authorization: Bearer ${{ secrets.SUPABASE_SERVICE_ROLE_KEY }}" \
            -H "Content-Type: application/json" \
            -d '{"review_period": "last_7_days"}'
```

---

**Version:** 5.0  
**Datum:** 2025-01-30  
**Status:** ‚úÖ PRODUCTION-READY

**MISSION:** Zero-Hallucination durch perfekte Session-Initialization!
