# üìö KNOWLEDGE V18.3.25 - ZENTRALE VORGABEN

## üéØ ZWECK
Diese Datei ist die zentrale Referenz f√ºr alle Arbeitsabl√§ufe und Vorgaben.
Sie wird in Lovable Project Settings -> Knowledge referenziert und ist bei jedem Request verf√ºgbar.

---

## üìã DOKUMENTATIONS-HIERARCHIE

### **HAUPT-DOKUMENTE (IMMER BEFOLGEN)**

1. **AUTONOMOUS_AGENT_MODE_V18.3.25.md**
   - Autonomer Workflow (Phase -2 bis 5)
   - Proaktive Recherche BEVOR User gefragt wird
   - Systematische Vollst√§ndigkeits-Checks
   - Pattern-Detection & Selbst-Verbesserung
   - ‚û°Ô∏è `docs/AUTONOMOUS_AGENT_MODE_V18.3.25.md`

2. **META_GUIDELINES_V18.3.25.md**
   - Detaillierter Workflow f√ºr jeden Work-Step
   - Design System Vorgaben (Farben, Layout, Typography)
   - Protected Layout System (Header, Sidebar, Footer)
   - Zentrale Utils & Hooks
   - Security & Localization
   - Quality Gates
   - ‚û°Ô∏è `docs/META_GUIDELINES_V18.3.25.md`

2b. **VERWALTUNGS_SEITEN_DESIGN_VORGABEN_V18.3.26.md** üÜï
   - Design- und Layout-Vorgaben f√ºr interne Seiten
   - Referenz: Index.tsx (Dashboard) & Auftraege.tsx
   - StandardPageLayout Mandatory
   - DIALOG_LAYOUT Mandatory
   - Touch-Targets, Icons, Typography
   - ‚û°Ô∏è `docs/VERWALTUNGS_SEITEN_DESIGN_VORGABEN_V18.3.26.md`

3. **OPTIMIERUNG_MYDISPATCH_V18.3.25.md** üÜï
   - Qualit√§tssicherungs-Strategien
   - Performance Optimierungen
   - Testing & CI/CD Pipeline
   - Monitoring & Observability
   - Developer Experience Verbesserungen
   - ‚û°Ô∏è `docs/OPTIMIERUNG_MYDISPATCH_V18.3.25.md`

4. **ERROR_DATABASE_V18.3.25.md**
   - Vollst√§ndige Fehleranalyse
   - Priorisierter Behebungsplan
   - Lessons Learned
   - ‚û°Ô∏è `docs/ERROR_DATABASE_V18.3.25.md`

---

## üîÑ AUTONOMER AGENT MODE - KURZFASSUNG

### **KERNPRINZIP**
```
ERST RECHERCHIEREN (5+ Min) ‚Üí DANN HANDELN ‚Üí NUR WENN UNKLAR: FRAGEN
```

### **RECHERCHE-REIHENFOLGE**
```
1. KNOWLEDGE_V18.3.25.txt (Diese Datei)
2. META_GUIDELINES_V18.3.25.md
3. AUTONOMOUS_AGENT_MODE_V18.3.25.md
4. Sprint-Reports & Completion-Reports
5. Code Search (Bestehende Patterns)
6. Lovable-Dokumentation (useful-context)
7. Web-Search (Nur wenn wirklich n√∂tig)
```

### **VOLLST√ÑNDIGKEITS-CHECK BEI JEDER √ÑNDERUNG**
```
‚úÖ Zentrale L√∂sung verwendet?
‚úÖ ALLE betroffenen Dateien gefunden? (Search-Tool!)
‚úÖ Design-System aktualisiert? (index.css, tailwind.config.ts)
‚úÖ Anti-Patterns dokumentiert?
‚úÖ Tests durchgef√ºhrt?
‚úÖ Breaking Changes verhindert?
```

---

## üé® DESIGN SYSTEM - KRITISCHE REGELN

### **FARBEN**
```
‚ùå VERBOTEN: accent, accent-foreground
‚úÖ VERWENDEN: primary, primary-foreground, foreground, muted, etc.

‚ùå NIEMALS: text-white, bg-white, text-black, bg-black
‚úÖ IMMER: Semantic Tokens aus index.css
```

### **DIALOG LAYOUT**
```
‚ùå VERBOTEN: <Separator /> in Dialogs
‚ùå VERBOTEN: Manuelle className f√ºr Dialog-Layout
‚úÖ VERWENDEN: DIALOG_LAYOUT Utils aus dialog-layout-utils.ts
```

### **PROTECTED LAYOUT DIMENSIONS**
```
Header:  h-14 (3.5rem / 56px)
Sidebar: w-64 (16rem / 256px)
Footer:  h-16 (4rem / 64px)
```

---

## üîß ZENTRALE UTILS & PATTERNS

### **FORMATTING**
- `formatCurrency()` - W√§hrung formatieren
- `formatDate()` - Datum formatieren
- `formatDateTime()` - Datum & Zeit formatieren
- ‚û°Ô∏è Alle in entsprechenden Utils-Dateien

### **DIALOG LAYOUT**
- `DIALOG_LAYOUT.content` - Dialog Content Wrapper
- `DIALOG_LAYOUT.header` - Header mit Titel & Beschreibung
- `DIALOG_LAYOUT.body` - Scrollbarer Body-Bereich
- `DIALOG_LAYOUT.footer` - Fixed Footer mit Actions
- ‚û°Ô∏è `src/lib/utils/dialog-layout-utils.ts`

### **VALIDATION**
- Email, Telefon, Postleitzahl, etc.
- ‚û°Ô∏è Zentrale Validation-Utils verwenden

### **AGENT DEBUG SYSTEM** üÜï
- `AgentDebugSystem` - Automatische Fehleranalyse
- `DesignSystemScanner` - Design-System Violations
- `AccessibilityScanner` - A11y Issues
- `PerformanceScanner` - Performance Problems
- `IconScanner`, `TypographyScanner`, `SpacingScanner`
- ‚û°Ô∏è `src/lib/agent-debug-system.ts`

---

## ‚ö†Ô∏è ANTI-PATTERNS (NIEMALS TUN)

### **CODE-LEVEL**
```
‚ùå accent Color verwenden
‚ùå <Separator /> in Dialogs
‚ùå Manuelle Dialog-Layout className
‚ùå Inline Formatierung (Currency, Date)
‚ùå text-white, bg-white, text-black, bg-black
‚ùå Horizontales Scrollen
‚ùå Ungesch√ºtzte Layout-Dimensionen √§ndern
```

### **WORKFLOW-LEVEL**
```
‚ùå User fragen ohne vorherige Recherche (5+ Min)
‚ùå Teilweise Implementation (Dependencies vergessen)
‚ùå Sequenzielle Tool-Calls (wenn parallel m√∂glich)
‚ùå Veraltete Patterns verwenden
‚ùå Breaking Changes ohne Tests
‚ùå Code schreiben ohne File-Kontext
```

---

## üöÄ AKTUELLER STATUS (V18.3.25)

### **LETZTE √ÑNDERUNGEN**
- ‚úÖ Autonomous Agent Mode aktiviert
- ‚úÖ Dialog Layout Utils systematisch implementiert
- ‚úÖ Accent Color Migration: 84/84 behoben (100%) ‚≠ê
- ‚úÖ Agent Debug System erweitert (15 Scanner-Typen)
- ‚úÖ ERROR_DATABASE erstellt & aktualisiert
- ‚úÖ OPTIMIERUNG_MYDISPATCH erstellt
- ‚úÖ VERWALTUNGS_SEITEN_DESIGN_VORGABEN_V18.3.26.md erstellt üÜï
- ‚úÖ Referenz-Seiten definiert: Index.tsx, Auftraege.tsx, Kostenstellen.tsx
- ‚úÖ Kostenstellen V18.3.26 finalisiert (UI-Spec + Fixes)

### **BEKANNTE ISSUES**
- ~24 Direct Color Violations verbleibend (Driver-App)
- ~10 Responsive Violations verbleibend
- Testing Suite noch nicht implementiert
- CI/CD Pipeline noch nicht konfiguriert

---

## üìä MIGRATIONS-STATUS

### **PHASE 1: FOUNDATION** ‚úÖ
- Auth.tsx ‚úÖ (15 violations ‚Üí 100% compliant)
- Portal.tsx ‚úÖ (45 violations ‚Üí 100% compliant)
- Agent Debug System ‚úÖ (erweitert auf 6 Scanner)
- ERROR_DATABASE ‚úÖ (vollst√§ndige Dokumentation)

### **PHASE 2: DRIVER-APP** ‚è≥
- DriverDashboard.tsx (10 violations) - NEXT
- DriverRegister.tsx (5 violations)
- DriverLogin.tsx (2 violations)
- DriverWelcome.tsx (2 violations)
- DriverForgotPassword.tsx (1 violation)
- DriverVerifyEmail.tsx (1 violation)
- DriverSplash.tsx ‚úÖ (accent behoben)

### **PHASE 3: PORTAL AUTH & PUBLIC** ‚è≥
- PortalAuth.tsx (accent behoben, Migration pending)
- Terms.tsx ‚úÖ (accent behoben)
- Unternehmer.tsx (1 violation)
- Home.tsx (Verifizierung pending)

### **PHASE 4: DASHBOARD PAGES** ‚è≥
- Dashboard.tsx, Auftr√§ge.tsx, Kunden.tsx, Fahrer.tsx, Fahrzeuge.tsx
- ~30+ Dialogs zu migrieren

---

## üéì KRITISCHE LERN-PATTERNS

### **H√ÑUFIGE FEHLER**
1. Dependencies vergessen (Search-Tool nutzen!)
2. Accent Color √ºbersehen (Systematisch suchen!)
3. Separator in Dialogs (DIALOG_LAYOUT verwenden!)
4. User zu fr√ºh fragen (5+ Min selbst recherchieren!)
5. Master Components nicht genutzt (HeroSection, KPICard, QuickActions)
6. Leere Elements nach Migration (CardHeader, etc. entfernen!)

### **ERFOLGS-METRIKEN**
```
‚úÖ 0 User-R√ºckfragen wegen fehlender Recherche
‚úÖ 0 Vergessene Dependencies
‚úÖ 0 Breaking Changes
‚úÖ 100% Pattern-Konsistenz
‚úÖ Max Parallelisierung bei Tool-Calls
‚úÖ 68% Design-System Compliance (‚Üë von 50%)
‚úÖ 50/74 Violations behoben
```

### **NEUE BEST PRACTICES V18.3.25**
```
‚úÖ Agent Debug System bei jeder √Ñnderung nutzen
‚úÖ ERROR_DATABASE vor jedem Task konsultieren
‚úÖ OPTIMIERUNG_MYDISPATCH f√ºr Verbesserungsvorschl√§ge
‚úÖ Parallel Tool-Calls IMMER nutzen (min. 3-5 gleichzeitig)
‚úÖ Testing automatisieren (Playwright, Jest)
‚úÖ CI/CD Pipeline f√ºr Quality Gates
```

---

## üîÑ SELBST-OPTIMIERUNG

Diese Datei wird kontinuierlich aktualisiert durch:
- Pattern-Detection (Gleicher Fehler >1x ‚Üí Update)
- User-Feedback (Unklarheiten ‚Üí Dokumentation erweitern)
- Neue Features (Neue Utils ‚Üí Hier dokumentieren)
- Meta-Learning (Erfolgreiche Patterns ‚Üí Best Practices)

**LETZTE AKTUALISIERUNG:** Sprint 47 - V18.3.25
**N√ÑCHSTE REVIEW:** Nach Abschluss der Accent-Migration

---

## üìû SUPPORT & FRAGEN

Bei Unklarheiten IMMER ZUERST:
1. Diese Datei lesen (KNOWLEDGE_V18.3.25.txt)
2. META_GUIDELINES_V18.3.25.md konsultieren
3. AUTONOMOUS_AGENT_MODE_V18.3.25.md pr√ºfen
4. Code Search durchf√ºhren
5. Sprint-Reports checken

**NUR DANN** User fragen - mit Kontext was bereits gepr√ºft wurde!

---

*Diese Datei ist selbstoptimierend und wird kontinuierlich verbessert.*
*Version: 18.3.25*
*Status: AKTIV*
